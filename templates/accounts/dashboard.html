{% extends 'base.html' %}
{% load static %}

{% block title %}Dashboard - {{ user.full_name }} | E-SHOP{% endblock %}

{% block content %}
<section>

    {% include 'includes/alerts.html' %}
    <div class="container dash-container">
        <div class="row">

            {% include 'includes/dashboard_sidebar.html' %}

            <main class="col-md-9">
                <article class="card dashboard-card">
                    <div class="dash-header-container">
                        <div class="dash-header">DASHBOARD: {{user.full_name}}</div>
                    </div>

                    <!-- Sticks 2 cards in dashboard together -->
                    <div class="dash-row">

                        <!-- Profile Info with Fallback -->
                        <div class="col-6">
                            <div class="card">
                                <div class="dash-card-body">
                                    {% if userprofile.profile_picture %}
                                        <img class="dash-img" src="{{ userprofile.profile_picture.url }}" alt="User Profile Picture">
                                    {% else %}
                                        <img class="dash-img" src="/media/userprofile/default-profile.png" alt="Default Profile Image">
                                    {% endif %}
                                    <div class="dash-user-info">{{ user.full_name }}</div>
                                    <div class="dash-user-info">{{ user.email }}</div>
                                    <div class="dash-user-info">{{ user.phone_number }}</div>
                                </div>
                            </div>
                        </div>

                        <!-- Orders Information -->
                        <div class="col-6">
                            <div class="card">
                                <div class="dash-card-body">
                                    <div class="semi-bold">Total Orders:</div>
                                    <div class="semi-bold">{{ orders_count }}</div>
                                    <a class="cart-link" href="{% url 'my_orders' %}">Order History</a>
                                </div>
                            </div>
                        </div>
                    </div>

                </article>
            </main>
        </div>
    </div>
</section>
{% endblock %}
